<template tag-name="contact-list">
    <div class="page-content">
        <header class="header-row">
            <h1 class="header-title">Contacts</h1>

            <template is="if" value="{{canCreate}}">
                <a href="#/contacts/create" class="btn btn-primary">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right:8px"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    Add Contact
                </a>
            </template>
        </header>

        <div class="filter-bar">
            <input type="text" lyte-model="searchTerm" oninput="{{action('onSearch')}}" class="form-input search-input" placeholder="Search contacts...">

            <select lyte-model="selectedCompany" onchange="{{action('onCompanyFilter')}}" class="form-select company-select">
                <option value="">All Companies</option>
                <template is="for" items="{{companyList}}" item="comp" index="i">
                    <option value="{{comp.id}}">{{comp.name}}</option>
                </template>
            </select>
        </div>

        <div class="card">

            <template is="if" value="{{isLoading}}">
                <div class="loading-state">
                    <div class="spinner"></div>
                </div>
            </template>

            <template is="else">

                <template is="if" value="{{displayedContacts.length === 0}}">
                    <div class="empty-state">
                        <div class="empty-icon">Inbox</div>
                        <h3>No contacts found</h3>
                        <p>Try changing your filters or add a new contact.</p>
                    </div>
                </template>

                <template is="else">
                    <div class="contacts-list">
                        <template is="for" items="{{displayedContacts}}" item="contact" index="i">
                            <div class="contact-card" onclick="{{action('viewContact', contact.id)}}">
                                <div class="contact-avatar" style="background-color: {{method('getAvatarColor', contact.name)}}">
                                    {{method('getInitials', contact.name)}}
                                </div>

                                <div class="contact-info">
                                    <div class="contact-name">{{contact.name}}</div>
                                    <div class="contact-meta">
                                        <template is="if" value="{{contact.email}}">
                                            <span>{{contact.email}}</span>
                                        </template>

                                        <template is="if" value="{{contact.email && contact.phone}}"> â€¢ </template>

                                        <template is="if" value="{{contact.phone}}">
                                            <span>{{contact.phone}}</span>
                                        </template>
                                    </div>
                                    <div class="contact-company">{{contact.companyName}}</div>
                                </div>
                            </div>
                        </template>
                    </div>
                </template>
            </template>
        </div>
    </div>
</template>