<template tag-name="contact-list">
    <div class="page-container">
        <header class="page-header">
            <h1 class="title">Contacts</h1>
            <template is="if" value="{{canCreate}}">
                <a href="#/contacts/create" class="add-btn">
                    <span>+ Add Contact</span>
                </a>
            </template>
        </header>

        <div class="search-bar">
            <div class="input-group">
                <span class="search-icon">üîç</span>
                <input type="text" lyte-model="searchTerm" oninput="{{action('onSearch')}}" placeholder="Search contacts..." class="clean-input">
            </div>

            <div class="select-group">
                <select lyte-model="selectedCompany" onchange="{{action('onCompanyFilter', this)}}" class="clean-select">
                    <option value="">All Companies</option>
                    <template is="for" items="{{companyList}}" item="comp" index="i">
                        <option value="{{comp.id}}">{{comp.name}}</option>
                    </template>
                </select>
            </div>
        </div>

        <div class="list-card">

            <div style="padding: 10px; color: #888; font-size: 12px; border-bottom: 1px solid #eee;">
                Debug: Found {{displayedContacts.length}} contacts.
            </div>

            <div class="list-scroll-area">
                <template is="for" items="{{displayedContacts}}" item="contact" index="i">

                    <div class="list-item" onclick="{{action('viewContact', contact.id)}}">

                        <div class="item-avatar">
                            <span style="font-size: 14px; font-weight: bold;">
                                {{contact.name.0}}
                            </span>
                        </div>

                        <div class="item-details">
                            <div class="item-name">{{contact.name}}</div>

                            <div class="item-meta">
                                <span>{{contact.email}}</span>
                                <span class="dot">‚Ä¢</span>
                                <span>{{contact.phone}}</span>
                            </div>

                            <div class="item-company">{{contact.companyName}}</div>
                        </div>

                        <div class="item-action">‚Ä∫</div>
                    </div>

                </template>
            </div>
        </div>
    </div>
</template>